"use strict";var CSSOM=require("cssom"),myClassName="simple-svg",SimpleSVG={template:'<div class="simple-svg-wrapper"></div>',name:"simple-svg",props:{filepath:String,color:{type:String,default:"black"},width:{type:String,default:"1em"},height:{type:String,default:"1em"},id:{type:String,defualt:""}},data:function(){return{isSVGReady:!1}},mounted:function(){this.generateInlineSVG()},watch:{filepath:function(e){this.generateInlineSVG()},color:function(e){this.updateSVGStyle("fill",e)},width:function(e){this.updateSVGStyle("width",e)},height:function(e){this.updateSVGStyle("height",e)}},methods:{isClassSelector:function(e){return!!new RegExp(/^\./,"i").test(e)},removeStyleTag:function(e){for(var t=e.getElementsByTagName("style")[0],i=CSSOM.parse(t.textContent).cssRules,s=e.getElementsByTagName("*"),r=0;r<s.length;r++)for(var n=0;n<i.length;n++){var l=i[n].selectorText;if(this.isClassSelector(l)){var a=l.substring(1);if(s[r].classList.contains(a)){s[r].classList.remove(a);var o=i[n].style,m=o[0],u=o[m];s[r].style[m]=u}}}return e.removeChild(t),e},generateInlineSVG:function(){var e=this;this.isSVGReady=!1;var t=this.$el.getElementsByTagName("svg")[0];t&&this.$el.removeChild(t);var i=new XMLHttpRequest;i.open("GET",this.filepath,!0),i.onload=function(){if(i.status>=200&&i.status<400){var t=(new DOMParser).parseFromString(i.responseText,"text/xml").getElementsByTagName("svg")[0];if(!t)return void console.error("No svg element found. Did you pass a valid .svg file?");t.getElementsByTagName("style")[0]&&(t=e.removeStyleTag(t)),t.removeAttribute("xmlns:a"),t.removeAttribute("width"),t.removeAttribute("height"),t.removeAttribute("x"),t.removeAttribute("y"),t.removeAttribute("enable-background"),t.removeAttribute("xmlns:xlink"),t.removeAttribute("xml:space"),t.removeAttribute("version"),e.id&&(t.id=e.id),t.style.width=e.width,t.style.height=e.height,t.style.fill=e.color,t.classList.add(myClassName),e.$el.appendChild(t),this.isSVGReady=!0,e.$emit("ready")}else console.error("There was an error retrieving the source of the SVG.")},i.onerror=function(){console.error("There was an error connecting to the origin server.")},i.send()},updateSVGStyle:function(e,t){var i=this.$el.getElementsByTagName("svg")[0];i?i.style[e]=t:console.error("No svg element found. Did you pass a valid .svg file?")}}},plugin={install:function(e,t){e.component("simple-svg",SimpleSVG)}};module.exports=plugin;
